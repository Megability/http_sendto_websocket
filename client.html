<!DOCTYPE HTML>
<html>
    <head>
        <meta charset = "utf-8" />
        <title>test</title>
        
        <script type="text/javascript">
        
        // 打开一个 web socket
        
        var ws = new WebSocket("ws://ip:port?token=xxxxxxxx");
        ws.onopen = function() {
            // Web Socket 已连接上，使用 send() 方法发送数据
            ws.send("发送数据");
            console.log('发送数据');
        };
        ws.onmessage = function(evt) {
            var received_msg = evt.data;
            console.log('接收消息'+received_msg);
            document.getElementById("test").innerHTML = document.getElementById("test").innerHTML +"<br>"+ received_msg;
        };
        ws.onclose = function() {
            // 关闭 websocket
            console.log('关闭');
        };
        </script>
    </head>

<body>
    <div id = "test">
    
    </div>
</body>
</html>